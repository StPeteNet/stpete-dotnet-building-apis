<!doctype html>

<html>
	<head>
		<title>API Test</title>
		<script src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.9.0.min.js"></script>
		<script src="~/../js/demo.js"></script>
		<link rel="~/../css/demo.css" type="text/stylesheet" />
	</head>
	<body>

		<h1>API Order Test Page</h1>
		<form id='order-item'>
			<select id="product" name="productId">
				<option value="">Please Select ...</option>
			</select>
			<input id="quantity" name="quantity" type="number" min="0" max="1000" step="1" />
			<button type="submit">Add to Order</button>
		</p>
		<div id="order"></div>

		<script>
			$(function () {

				// Initialize the App with options
				App.init();

				// Load Products
				App.products.getAll(function(products){
					if (products && products.length){
						$.each(products, function(i, p){
							$('select#product').append($('<option/>').attr('value', p.id).text(p.description));
						});
					}
				});

				// Start Order
				App.orders.start(displayOrder);

				// Events
				$('form#order-item').submit(function(e){
					e.preventDefault();
					var $form = $(this);
					var data = $(this).serialize();
					debugger;
					App.orders.addItem(data, displayOrder);
					$('select#product').val('');
					$('input#quantity').val('');
				});

			});

			// Show an Order on the Page
			function displayOrder(order){

			}

		</script>
	</body>
</html>

